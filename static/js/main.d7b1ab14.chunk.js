(this["webpackJsonptsn-browser"]=this["webpackJsonptsn-browser"]||[]).push([[0],{13:function(t,e,n){},15:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),c=n(7),u=n.n(c),o=(n(13),n(3)),a=n(4),s=n(6),l=n.n(s),d=n(8),f=n(2),j=(n(15),n(0)),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mlb_card";return fetch("https://mlb21.theshow.com/apis/listings.json?type=".concat(e,"&page=").concat(t,"&min_rank=82"),{credentials:"omit"}).then((function(t){return t.json()})).catch((function(t){console.error(t)}))},b=function t(e){return fetch("https://mlb21.theshow.com/apis/listing.json?uuid=".concat(e),{credentials:"omit"}).then((function(t){return t.json()})).catch((function(n){return console.error(n),t(e)}))};var h=function(t){return localStorage.hasOwnProperty(t.item.uuid)};var O=function(t){return Math.round(.9*t.best_sell_price-t.best_buy_price)},p=function(t){return Math.round(O(t)/t.best_buy_price*100)},x=function(t){var e=new Date(t.completed_orders[0].date).getTime();return 60/t.completed_orders.filter((function(t){return new Date(t.date).getTime()>e-36e5})).length},g=function(t){var e=new Date(t.completed_orders[0].date).getTime();return t.completed_orders.filter((function(t){return new Date(t.date).getTime()>e-36e5})).length/60},v=function(t){var e=new Date(t.completed_orders[0].date).getTime(),n=t.completed_orders.filter((function(t){return new Date(t.date).getTime()>e-36e5})).map((function(t){return Number(t.price.replace(",",""))})).sort().reverse(),r=n.slice(0,Math.round(n.length/2));return r[Math.round(r.length/2)]},_=function(t){var e=new Date(t.completed_orders[0].date).getTime(),n=t.completed_orders.filter((function(t){return new Date(t.date).getTime()>e-36e5})).map((function(t){return Number(t.price.replace(",",""))})).sort().reverse(),r=n.slice(-Math.round(n.length/2));return r[Math.round(r.length/2)]},y=function(t){return.9*v(t)-_(t)},S=function(t,e){return Object(o.a)(Object(o.a)({},t),{},{profit_amount:O(t),profit_percent:p(t),med_buy:e?e.med_buy:void 0,med_sell:e?e.med_sell:void 0,med_profit:e?e.med_profit:void 0,mps:e?x(e):void 0,spm:e?g(e):void 0,ppm:e?Math.round(e.med_profit*e.spm):void 0})},w=function(t){var e=t.card,n=t.filter,i=t.addDetail,c=t.details,u=t.loadAnyway,a=Object(r.useState)(!1),s=Object(f.a)(a,2),l=s[0],d=s[1],m=Object(r.useRef)(),O=function(t){var e=Object(r.useState)(!1),n=Object(f.a)(e,2),i=n[0],c=n[1],u=new IntersectionObserver((function(t){var e=Object(f.a)(t,1)[0];return c(e.isIntersecting)}));return Object(r.useEffect)((function(){return u.observe(t.current),function(){u.disconnect()}}),[]),i}(m),p=!n(e);return Object(r.useEffect)((function(){c||p||l||!O&&!u||(d(!0),b(e.item.uuid).then((function(t){d(!1),i(Object(o.a)(Object(o.a)({},t),{},{med_buy:_(t),med_sell:v(t),med_profit:y(t),spm:g(t),mps:x(t)}))})))}),[O,l,e.item.uuid,i,u,p]),Object(j.jsxs)("tr",{ref:m,style:{display:n(e)?"":"none"},children:[Object(j.jsx)("td",{children:Object(j.jsxs)("a",{href:"/items/".concat(e.item.uuid),target:"_blank",children:[h(e)&&"**",e.listing_name]})}),Object(j.jsx)("td",{children:e.item.ovr}),Object(j.jsx)("td",{children:e.item.rarity}),Object(j.jsx)("td",{children:e.item.series}),Object(j.jsx)("td",{children:e.item.team}),Object(j.jsx)("td",{children:e.best_buy_price.toLocaleString()}),Object(j.jsx)("td",{children:e.best_sell_price.toLocaleString()}),Object(j.jsx)("td",{children:e.profit_amount.toLocaleString()}),Object(j.jsxs)("td",{children:[e.profit_percent,"%"]}),Object(j.jsx)("td",{children:null!=e.mps?e.mps.toFixed(1):l?"...":"MPS"}),Object(j.jsx)("td",{children:null!=e.spm?e.spm.toFixed(1):l?"...":"SPM"}),Object(j.jsx)("td",{style:{textAlign:"right"},children:null!=e.ppm?e.ppm.toLocaleString():l?"...":"PPM"})]})},k=function(){var t,e,n,i=Object(r.useState)(Date.now()),c=Object(f.a)(i,2),u=c[0],o=c[1],s=Object(r.useState)([]),b=Object(f.a)(s,2),x=b[0],v=b[1],_=Object(r.useState)((function(){return function(t){return t.item.ovr%10}})),y=Object(f.a)(_,2),k=y[0],C=y[1],M=Object(r.useState)({min_rank:null,max_rank:null}),D=Object(f.a)(M,2),P=(D[0],D[1]),T=Object(r.useState)({}),L=Object(f.a)(T,2),A=L[0],F=L[1],I=Object(r.useState)(0),R=Object(f.a)(I,2),B=R[0],E=R[1],N=Object(r.useState)(0),J=Object(f.a)(N,2),q=J[0],H=J[1],z=Object(r.useState)(90),G=Object(f.a)(z,2),K=G[0],Q=G[1],U=Object(r.useState)(99),V=Object(f.a)(U,2),W=V[0],X=V[1],Y=Object(r.useState)(!1),Z=Object(f.a)(Y,2),$=Z[0],tt=Z[1],et=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.some((function(e){return e(t)}))}}(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.every((function(e){return e(t)}))}}((n=q,function(t){return p(t)>=n}),(t=K,e=W,function(n){return n.item.ovr>=t&&n.item.ovr<=e}),function(t){return function(e){return!A[e.item.uuid]||g(A[e.item.uuid])>=t}}(B)),h),nt=function(t){return A[t.item.uuid]?(A[t.item.uuid].med_profit||0)*(A[t.item.uuid].spm||0):0},rt=function(t,e){return nt(t)>nt(e)?-1:nt(t)<nt(e)?1:0};return Object(r.useEffect)((function(){m(1).then((function(t){return t.total_pages})).then((function(t){var e=Array(t).fill(0).map((function(t,e){return e+1})).map((function(t){return m(t)}));return e.forEach(function(){var t=Object(d.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:n=t.sent.listings,v((function(t){return t.concat(n).sort(rt)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Promise.all(e)}))}),[u]),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsxs)("div",{children:["Low: ",Object(j.jsx)("input",{type:"range",min:70,max:99,value:Math.min(K,W),onChange:function(t){return Q(Math.min(+t.target.value,W))}})," ",K,"High: ",Object(j.jsx)("input",{type:"range",min:70,max:99,value:Math.max(K,W),onChange:function(t){return X(Math.max(+t.target.value,K))}})," ",W,"ROI min: ",Object(j.jsx)("input",{type:"range",min:-100,max:100,value:Math.max(q),onChange:function(t){return H(+t.target.value)}})," ",q,"SPM min: ",Object(j.jsx)("input",{type:"range",min:0,max:100,value:10*B,onChange:function(t){return E(+t.target.value/10)}})," ",B]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){return P({min_rank:K,max_rank:W})},children:"Search"}),Object(j.jsx)("button",{onClick:function(){return tt(!0)},children:"Load Details"}),Object(j.jsx)("button",{onClick:function(){v([]),F({}),o(Date.now())},children:"Reset"})]}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return t.listing_name}}))},children:"Name"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return t.item.ovr}}))},children:"Overall"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return t.item.rarity}}))},children:"Rarity"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return t.item.series}}))},children:"Series"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return t.item.team}}))},children:"Team"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return t.best_buy_price}}))},children:"Best Buy"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return t.best_sell_price}}))},children:"Best Sell"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return O}))},children:"Profit"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return p}))},children:"ROI%"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return S(t,A[t.item.uuid]).mps||0}}))},children:"M/S"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return function(t){return S(t,A[t.item.uuid]).spm||0}}))},children:"S/M"}),Object(j.jsx)("th",{onClick:function(){return C((function(){return nt}))},children:"PPM"})]})}),Object(j.jsx)("tbody",{children:x.filter(et).sort((function(t,e){return k(t)>k(e)?-Math.random():k(t)<k(e)?Math.random():0})).map((function(t){return Object(j.jsx)(w,{card:S(t,A[t.item.uuid]),filter:et,details:A[t.item.uuid],loadAnyway:$,addDetail:function(e){F((function(n){return Object.assign({},n,Object(a.a)({},t.item.uuid,e))}))}},t.item.uuid)}))})]})]})},C=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,c=e.getLCP,u=e.getTTFB;n(t),r(t),i(t),c(t),u(t)}))};u.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.querySelector("body")),C()}},[[17,1,2]]]);
//# sourceMappingURL=main.d7b1ab14.chunk.js.map